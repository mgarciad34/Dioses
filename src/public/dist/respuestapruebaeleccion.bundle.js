document.addEventListener("DOMContentLoaded",(async function(){const e=document.getElementById("preguntaContainer"),t=document.getElementById("respuestaSelect"),o=document.getElementById("responderBtn");if(!e||!t||!o)return void console.error("Algunos elementos no existen en el DOM.");const a=JSON.parse(localStorage.getItem("respuesta"));if(!a)return void console.error("No se pudo obtener la respuesta del almacenamiento local.");const r=document.createElement("label");r.textContent=a.pregunta,e.appendChild(r);try{const e=a.prueba_id,o=sessionStorage.getItem("token"),r=await fetch(`http://localhost:8000/api/humano/recuperar/pruebas/eleccion/${e}`,{headers:{Authorization:`Bearer ${o}`}});if(!r.ok)throw new Error(`Error HTTP: ${r.status}`);const n=await r.json(),s=n.data.respuesta1,c=n.data.respuesta2,i=n.data.correcta;localStorage.setItem("correcta",i);const l=[{texto:s},{texto:c}];localStorage.setItem("opciones",JSON.stringify(l)),l.forEach((e=>{const o=document.createElement("option");o.textContent=e.texto,t.appendChild(o)}))}catch(e){console.error("Error al obtener las opciones de respuesta:",e)}o.addEventListener("click",(async function(){let e;t.value===localStorage.getItem("correcta")?(console.log("Correcto"),e={id:a.id,id_humano:sessionStorage.getItem("id_humano"),superada:0},console.log(e)):(console.log("Incorrecto"),e={id:a.id,id_humano:sessionStorage.getItem("id_humano"),superada:1},console.log(e));try{const t=sessionStorage.getItem("token"),o=await fetch("http://localhost:8000/api/humano/superada",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)});if(!o.ok)throw new Error(`Error HTTP: ${o.status}`);const a=await o.json();console.log("Respuesta de la petición 'superada':",a),window.location.href="dashboardhumanovivo.html"}catch(e){console.error("Error al realizar la petición 'superada':",e)}}))}));