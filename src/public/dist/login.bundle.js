(()=>{"use strict";class e{constructor(e,t){this.email=e,this.contrasena=t}getJSON(){return{correo:this.email,contrasena:this.contrasena}}}var t=document.getElementById("email"),o=document.getElementById("password");document.getElementById("btniniciar").addEventListener("click",(function(r){r.preventDefault(),async function(e){try{const t=await fetch("http://127.0.0.1:8000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Error de red: ${t.status}`);return await t.json()}catch(e){throw console.error("Error al enviar los datos:",e.message),e}}(new e(t.value,o.value).getJSON()).then((function(e){sessionStorage.setItem("token",e.token),sessionStorage.setItem("rol",e.rol),sessionStorage.setItem("usuario",e.user),"humano"==e.rol?(sessionStorage.setItem("correo",t.value),window.location.href="./dashboardhumano.html"):"dios"==e.rol&&(window.location.href="./dashboarddios.html")})).catch((function(e){console.error("Error al registrar:",e.message)}))}))})();