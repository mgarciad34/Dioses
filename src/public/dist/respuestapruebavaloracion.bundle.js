document.addEventListener("DOMContentLoaded",(async function(){const e=document.getElementById("preguntaContainer"),o=document.getElementById("valoracionSelect"),t=document.getElementById("responderBtn");if(!e||!o||!t)return void console.error("Algunos elementos no existen en el DOM.");const a=JSON.parse(localStorage.getItem("respuesta"));if(!a)return void console.error("No se pudo obtener la respuesta del almacenamiento local.");try{const e=a.prueba_id,o=sessionStorage.getItem("token"),t=await fetch(`http://localhost:8000/api/humano/recuperar/pruebas/valoracion/${e}`,{headers:{Authorization:`Bearer ${o}`}});if(!t.ok)throw new Error(`Error HTTP: ${t.status}`);const n=(await t.json()).data.valor;localStorage.setItem("peticion",n)}catch(e){console.error("Error al obtener el resultado de la valoración:",e)}const n=document.createElement("label");n.textContent=a.pregunta,e.appendChild(n),t.addEventListener("click",(async function(){let e;o.value===localStorage.getItem("peticion")?(console.log("Correcto"),e={id:a.id,id_humano:sessionStorage.getItem("id_humano"),superada:0},console.log(e)):(console.log("Incorrecto"),e={id:a.id,id_humano:sessionStorage.getItem("id_humano"),superada:1},console.log(e));try{const o=sessionStorage.getItem("token"),t=await fetch("http://localhost:8000/api/humano/superada",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Error HTTP: ${t.status}`);const a=await t.json();console.log("Respuesta de la petición 'superada':",a),window.location.href="dashboardhumanovivo.html"}catch(e){console.error("Error al realizar la petición 'superada':",e)}}))}));