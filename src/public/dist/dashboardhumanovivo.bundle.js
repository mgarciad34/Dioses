document.addEventListener("DOMContentLoaded",(function(){localStorage.clear();const e=sessionStorage.getItem("token"),t=document.getElementById("selectFetch");t.addEventListener("change",(function(){const n=sessionStorage.getItem("id_humano"),a=t.value;let o="";"libres"===a?o=`http://localhost:8000/api/humano/obtener/pruebas/libres/${n}`:"valoracion"===a?o=`http://localhost:8000/api/humano/obtener/pruebas/valoracion/${n}`:"eleccion"===a&&(o=`http://localhost:8000/api/humano/obtener/pruebas/eleccion/${n}`);const c=document.getElementById("resultadoFetch");fetch(o,{headers:{Authorization:`Bearer ${e}`}}).then((e=>e.json())).then((e=>{if(0===e.length)c.innerHTML="<p>No tienes preguntas.</p>";else{const t=document.createElement("table");t.classList.add("table","table-bordered");const n=document.createElement("thead"),o=document.createElement("tr");["ID","Pregunta","Estado"].forEach((e=>{const t=document.createElement("th");t.textContent=e,o.appendChild(t)})),n.appendChild(o),t.appendChild(n);const s=document.createElement("tbody");e.forEach((e=>{const t=document.createElement("tr");Object.values(e).forEach(((e,n)=>{if(3!==n&&4!==n){const a=document.createElement("td");2===n?0===e?(a.textContent="Superado",t.classList.add("superado")):1===e?(a.textContent="No Superado",t.classList.add("no-superado")):a.textContent="Pendiente de realizar":a.textContent=e,t.appendChild(a)}}));const n=document.createElement("td"),o=document.createElement("button");o.textContent="Responder Pregunta",o.classList.add("btn","btn-primary","btn-sm"),(0===e.acciones||t.classList.contains("superado")||t.classList.contains("no-superado"))&&(o.disabled=!0),o.addEventListener("click",(function(){localStorage.setItem("respuesta",JSON.stringify(e)),"libres"===a?window.location.href="respuestapruebaslibres.html":"eleccion"===a?window.location.href="respuestaeleccion.html":"valoracion"===a&&(window.location.href="respuestavaloracion.html")})),n.appendChild(o),t.appendChild(n),s.appendChild(t)})),t.appendChild(s),c.innerHTML="",c.appendChild(t)}})).catch((e=>{c.innerHTML=`Error: ${e}`}))})),t.dispatchEvent(new Event("change"))}));